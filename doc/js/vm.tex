\clearpage\secrel{Implementing object VM in \js}\label{jsvm}\secdown

Here we will start from scratch. Just create empty \verb|~/VM.html|, open it it
Google Chrome browser, and press \keys{F12} to get \js\ \emph{console}:
\begin{lstlisting}[language=html]
<title>oFORTH/js</title>
<script>
// put your code here, restart by just page reload
</script>
\end{lstlisting}

\noindent
Just create stacks in one line:

\begin{lstlisting}[language=c++]
D = [ ]												// data stack
R = [ ]												// return stack
\end{lstlisting}

\clearpage
\begin{lstlisting}[language=c++]
W = { }												// vocabulary
\end{lstlisting}

\noindent
Let's add few VM commands as primitive functions:

\begin{lstlisting}[language=c++]
W.nop = function nop() {}			// empty VM command
W.bye = function bye() {}			// stop system
\end{lstlisting}

\begin{lstlisting}[language=c++]
W.words = function words() {	// just print vocab
	console.log(W); }

window.onload = function entry () {	// system init
W['words'](); console.log(W.nop); }
\end{lstlisting}

\begin{lstlisting}[language=c++]
{nop: f, bye: f, words: f}		// vocabulary
f nop() {}										// VM function
\end{lstlisting}

\pg Visual elements makes out interface must be embedded into .html 

\begin{lstlisting}[language=html]
<html>
	<head>
		<title>oFORTH/js</title>
		<style> </style>
		<script> // VM code here </script>
	</head>
	<body>
		<pre      id="log"> </pre>
		<textarea id="pad"> </textarea>
	</body>
</html>
\end{lstlisting}

\pg Visible window split into two areas:
\begin{description}[nosep]
\item[log] here we will print log and program messages.
\item[pad] input commands, 3 lines will be enough to edit command codes, but
will not be too big on a mobile phone screen.
\end{description}
\begin{lstlisting}[language=html]
<pre id="log">
<b>oFORTH</b>/js live web object system
(c) Dmitry Ponyatov &lt;dponyatov@gmail.com&gt;
github: https://github.com/ponyatov/o
</pre>
\end{lstlisting}
\begin{lstlisting}[language=html]
<textarea id="pad" rows=3>
# enter your commands here
</textarea>
\end{lstlisting}

\secup
